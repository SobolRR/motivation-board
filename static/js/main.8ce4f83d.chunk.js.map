{"version":3,"sources":["components/Xaxis.jsx","assets/fire.gif","components/ProgressBar.jsx","core/api.js","App.js","index.js"],"names":["Xaxis","props","points","values","map","value","idx","className","style","left","maxValue","defaultProps","ProgressBar","records","pointsValues","totalGoal","planMarkerPos","bestManager","items","record","width","Math","max","Number","length","toFixed","transformValue","backgroundColor","color","transform","name","margin","position","src","fireGif","alt","instance","axios","create","baseURL","fetchProfitByManages","a","post","link","result","data","personalPoints","commonPoints","App","useState","setRecords","colors","personalGoal","useEffect","then","item","employee","sellSum","sort","b","goal","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8ce4f83d.chunk.js","sourcesContent":["\nexport const Xaxis = (props) => {\n    const points = props.values.map((value,idx) => {\n\n      return     <div className=\"point\" key={idx}><span className=\"point__number\" style={{left:value * 100 / props.maxValue  +\"%\"}} >{value}</span></div>\n    })\n    return (\n    <div className=\"x-axis\">\n      {points}\n    </div>)\n  }\n\n  Xaxis.defaultProps = {\n    values:[50000,100000,150000,200000,250000]\n  }","export default __webpack_public_path__ + \"static/media/fire.42d52aef.gif\";","import { fireEvent } from \"@testing-library/react\";\nimport { Xaxis } from \"./Xaxis\";\nimport fireGif from '../assets/fire.gif'\nexport function ProgressBar({records,pointsValues,totalGoal,planMarkerPos,bestManager}) {\n  \n\n  const items = records.map((record) => {\n    const width = record.value * 100 / Math.max(...pointsValues) + \"%\"\n   \n    let value = record.value\nif (Number(record.value) === 0) {\n  return null;\n} else if (records.length > 1) {\n  value = ((value * 100) / totalGoal).toFixed(2) + '%'\n  \n}\n\nconst transformValue = records.length > 1 ? \"rotate(-90deg)\":  \"rotate(0deg)\"\n    return (\n      <div\n        className=\"progressbar__item\"\n        style={{ backgroundColor: record.color, width: width }}\n        key={record.name}\n    >\n        <span className=\"progressbar__value\" style={{transform:transformValue}}>{value}</span>\n      </div>\n    );\n  })\n\n  return (\n    <>\n      <div\n        className=\"progressbar-wrapper\"\n        style={{ margin: \"7rem 0\", position: \"relative\" }}\n      >\n        {records.length === 1 && (\n          <>\n            <div className=\"name\">{bestManager && <img className =\"fire-icon\"src={fireGif} alt=\"firing...\" />}{records[0].name}</div>\n            <div className=\"percentage\">\n              <div>7.5%</div>\n              <div>10%</div>\n              <div>13%</div>\n            </div>\n          </>\n        )}\n\n        <div className=\"progressbar\">\n          {items}\n          <div className=\"plan-marker\" style={{ left: planMarkerPos }}></div>\n        </div>\n        <Xaxis values={pointsValues} maxValue={Math.max(...pointsValues)} />\n      </div>\n    </>\n  );\n}\n\n\n","import axios from \"axios\"\n\n\n\nconst instance = axios.create({baseURL:\"https://kapri-server.herokuapp.com\"})\n\nexport const fetchProfitByManages = async () => {\n  \n  const link = \"https://online.moysklad.ru/api/remap/1.2/report/profit/byemployee?momentFrom=2021-03-01 00:00:01 \"\n\n  const result = await instance.post(\"/\", { link });\n    return result.data;\n}\n\n\n","import {useEffect,useState} from 'react'\nimport \"./App.scss\"\nimport 'antd/dist/antd.css';\nimport { ProgressBar } from \"./components/ProgressBar\"\nimport { fetchProfitByManages } from './core/api';\nimport {Spin} from 'antd'\n\n\nconst personalPoints = [35000,50000,67000,100000]\nconst commonPoints = [50000,100000,150000,200000,250000,300000]\n\n\nexport default function App(props) {\nconst [records, setRecords] = useState([]\n)\nconst colors = [\"#e4a21f\",\"#437fb7\",\"#3b8c13\"]\nconst totalGoal = 200000\nconst personalGoal = !!records.length ? totalGoal / records.length : 0\n\n\n\n\nuseEffect(()=>{\n  fetchProfitByManages().then((data)=>{\n    const records = data.map((item,idx) => {\n      const color = colors[idx]\n      return {\n        name:item.employee.name,\n        value: +(item.sellSum / 100).toFixed(0),\n        color\n      }\n    }).sort((a, b) => b.value - a.value )\n    setRecords(records)\n  })\n  \n},[])\nif(!records.length){\n  return  <div className=\"spinner\">\n  <Spin />\n</div>\n}\n\n  return (\n    <>\n    <ProgressBar goal={totalGoal} records = {records} planMarkerPos={totalGoal * 100 / 300000 + \"%\"} pointsValues={commonPoints} totalGoal={totalGoal}/>\n    {records.map((record,idx)=> {\n  return <ProgressBar bestManager={idx === 0} records={[record]} key={record.name} pointsValues={personalPoints} totalGoal={personalGoal} planMarkerPos={personalGoal * 100 / Math.max(...personalPoints) + \"%\"}/>\n})}\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}